---
import type { Post } from '@hotmetal/content-core';
import { formatDate } from '../lib/format';

interface Props {
  post: Post;
}

const { post } = Astro.props;

const date = post.publishedAt ? formatDate(post.publishedAt) : null;
---

<article class="animate-on-scroll group">
  <a href={`/posts/${post.slug}`} class="block">
    {post.featuredImage ? (
      <div class="aspect-[16/10] overflow-hidden rounded-lg mb-4 bg-bg-card">
        <img
          src={post.featuredImage}
          alt={post.title}
          class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
          loading="lazy"
        />
      </div>
    ) : (
      <div class="aspect-[16/10] rounded-lg mb-4 bg-bg-card flex items-center justify-center">
        <svg class="w-12 h-12 text-text-muted/30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z" />
        </svg>
      </div>
    )}

    <div class="space-y-2">
      {date && post.publishedAt && (
        <time datetime={post.publishedAt} class="text-sm text-text-muted">{date}</time>
      )}
      <h2 class="text-xl font-bold leading-snug group-hover:text-accent transition-colors">
        {post.title}
      </h2>
      {post.excerpt && (
        <p class="text-text-muted leading-relaxed line-clamp-2">
          {post.excerpt}
        </p>
      )}
    </div>
  </a>
</article>
